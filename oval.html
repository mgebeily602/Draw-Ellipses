<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ovals</title>
</head>
<body>
    <canvas width="1000" height="1000"></canvas>
    <script>

        const canvas = document.querySelector('canvas')
        const ctx = canvas.getContext("2d")
        const a=90;
        const h=500;
        const ang=Math.PI/4;
        
        CPS=[
            [0,1],
            [3,1],
            [1,-4],
            [0,-4]       
        ];
        x0=a*CPS[0][0], y0=a*CPS[0][1];
        x1=a*CPS[1][0], y1=a*CPS[1][1];
        x2=a*CPS[2][0], y2=a*CPS[2][1];
        x3=a*CPS[3][0], y3=a*CPS[3][1];

        xb=Math.cos(ang)*x0-Math.sin(ang)*y0;
        yb=Math.sin(ang)*x0+Math.cos(ang)*y0;

        console.log(xb+h,yb+h);

        ctx.beginPath();
        ctx.moveTo(xb+h, yb+h);
        for(let i=0; i<=100; i++){
            t=i*.01;
            xt=(1-t)**3*x0+3*(1-t)**2*t*x1+3*(1-t)*t**2*x2+t**3*x3;
            yt=(1-t)**3*y0+3*(1-t)**2*t*y1+3*(1-t)*t**2*y2+t**3*y3;
            xr=Math.cos(ang)*xt-Math.sin(ang)*yt;
            yr=Math.sin(ang)*xt+Math.cos(ang)*yt;
            xt=xr, yt=yr;
            if(i==0){
                console.log(xt+h,yt+h);
            }
            ctx.lineTo(xt+h,yt+h);
            ctx.stroke();
        }

        x0=a*-CPS[0][0], y0=a*CPS[0][1];
        x1=a*-CPS[1][0], y1=a*CPS[1][1];
        x2=a*-CPS[2][0], y2=a*CPS[2][1];
        x3=a*-CPS[3][0], y3=a*CPS[3][1];

        xb=Math.cos(ang)*x0-Math.sin(ang)*y0;
        yb=Math.sin(ang)*x0+Math.cos(ang)*y0;
        console.log(xb+h,yb+h);
        
        ctx.moveTo(xb+h, yb+h);
        for(let i=0; i<=100; i++){
            t=i*.01;
            xt=(1-t)**3*x0+3*(1-t)**2*t*x1+3*(1-t)*t**2*x2+t**3*x3;
            yt=(1-t)**3*y0+3*(1-t)**2*t*y1+3*(1-t)*t**2*y2+t**3*y3;
            xr=Math.cos(ang)*xt-Math.sin(ang)*yt;
            yr=Math.sin(ang)*xt+Math.cos(ang)*yt;
            xt=xr, yt=yr;
            ctx.lineTo(xt+h,yt+h);
            ctx.stroke();
        }

        
        // ctx.fillStyle = 'red';
        // ctx.beginPath();
        // ctx.arc(xb+h, yb+h, 5, 0, 2 * Math.PI);
        // ctx.fill();
    </script>
</body>
</html>